CC = @CC@
CFLAGS = @CFLAGS@
CPPFLAGS = @CPPFLAGS@
LDFLAGS = @LDFLAGS@

all: localtime gmtime mktime \
  adjtime adjtimex \
  gettimeofday clock_gettime \
  stat \
  info

localtime: localtime.o util.o
gmtime: gmtime.o util.o
mktime: mktime.o util.o
adjtime: adjtime.o
adjtimex: adjtimex.o
stat: stat.o
info: info.o util.o

gettimeofday: gettimeofday.o
clock_gettime: clock_gettime.o
	$(CC) -o $@ $(LDFLAGS) $^ $(LOADLIBES) $(LDLIBS) -lrt

# gcc -MM *.c
adjtime.o: adjtime.c timetester.h config.h util.h
adjtimex.o: adjtimex.c timetester.h config.h util.h
clock_gettime.o: clock_gettime.c timetester.h config.h util.h
gettimeofday.o: gettimeofday.c timetester.h config.h util.h
gmtime.o: gmtime.c xtime.h timetester.h config.h util.h
info.o: info.c timetester.h config.h util.h
localtime.o: localtime.c xtime.h timetester.h config.h util.h
mktime.o: mktime.c timetester.h config.h util.h
stat.o: stat.c timetester.h config.h util.h
util.o: util.c timetester.h config.h util.h
